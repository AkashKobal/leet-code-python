pal+=fi/2*4;
if (hasDouble==0 && (fi&1)==1)// when fi is odd
    hasDouble=1;// double letters in the center